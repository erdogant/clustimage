

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API References &mdash; clustimage clustimage documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=e0179649" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=88d6c118"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Coding quality" href="Coding%20quality.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            clustimage
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Background</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Abstract.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="Abstract.html#schematic-overview">Schematic overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html#uninstalling">Uninstalling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core functionalities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html">Core functionalities</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html#preprocessing">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html#output">Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html#generic-functions">Generic functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html#merge-expand-clusters">Merge/ Expand Clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html#move-files-based-on-clusterlabels">Move files based on clusterlabels</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_functions.html#plotting">Plotting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Feature Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Feature%20Extraction.html">PCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Feature%20Extraction.html#hog">HOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="Feature%20Extraction.html#exif">EXIF</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cluster Evaluation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Cluster%20Evaluation.html">Gridsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cluster%20Evaluation.html#silhouette">Silhouette</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cluster%20Evaluation.html#dbindex">DBindex</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cluster%20Evaluation.html#dbscan">DBSCAN</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Find/Predict</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Find.html">k-nearest neighbour</a></li>
<li class="toctree-l1"><a class="reference internal" href="Find.html#probability-density-fitting">Probability density fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="Find.html#more-examples">More examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Performance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Performance.html">Performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Save and Load</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Save%20and%20Load.html">Saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="Save%20and%20Load.html#loading">Loading</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Mnist dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#caltech101-dataset">Caltech101 dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#flower-dataset">Flower dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#clustering-of-faces">Clustering of faces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#extract-images-belonging-to-clusters">Extract images belonging to clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#set-image-filenames-using-pandas-dataframes">Set image filenames using pandas dataframes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#module-clustimage.clustimage.url2disk">Import images from url location</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html#breaking-up-the-steps">Breaking up the steps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Documentation.html">Sponsor</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html#blog">Blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html#github">Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html#colab-notebook">Colab Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html#citing">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Coding%20quality.html">Coding quality</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.Clustimage"><code class="docutils literal notranslate"><span class="pre">Clustimage</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.clean_files"><code class="docutils literal notranslate"><span class="pre">Clustimage.clean_files()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.clean_init"><code class="docutils literal notranslate"><span class="pre">Clustimage.clean_init()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.cluster"><code class="docutils literal notranslate"><span class="pre">Clustimage.cluster()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.compute_hash"><code class="docutils literal notranslate"><span class="pre">Clustimage.compute_hash()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.dendrogram"><code class="docutils literal notranslate"><span class="pre">Clustimage.dendrogram()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.embedding"><code class="docutils literal notranslate"><span class="pre">Clustimage.embedding()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.extract_faces"><code class="docutils literal notranslate"><span class="pre">Clustimage.extract_faces()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.extract_feat"><code class="docutils literal notranslate"><span class="pre">Clustimage.extract_feat()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.extract_hog"><code class="docutils literal notranslate"><span class="pre">Clustimage.extract_hog()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.extract_pca"><code class="docutils literal notranslate"><span class="pre">Clustimage.extract_pca()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.find"><code class="docutils literal notranslate"><span class="pre">Clustimage.find()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.fit_transform"><code class="docutils literal notranslate"><span class="pre">Clustimage.fit_transform()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.get_dim"><code class="docutils literal notranslate"><span class="pre">Clustimage.get_dim()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.import_data"><code class="docutils literal notranslate"><span class="pre">Clustimage.import_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.import_example"><code class="docutils literal notranslate"><span class="pre">Clustimage.import_example()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.imread"><code class="docutils literal notranslate"><span class="pre">Clustimage.imread()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.load"><code class="docutils literal notranslate"><span class="pre">Clustimage.load()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.move_to_dir"><code class="docutils literal notranslate"><span class="pre">Clustimage.move_to_dir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.plot"><code class="docutils literal notranslate"><span class="pre">Clustimage.plot()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.plot_faces"><code class="docutils literal notranslate"><span class="pre">Clustimage.plot_faces()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.plot_find"><code class="docutils literal notranslate"><span class="pre">Clustimage.plot_find()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.plot_map"><code class="docutils literal notranslate"><span class="pre">Clustimage.plot_map()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.plot_unique"><code class="docutils literal notranslate"><span class="pre">Clustimage.plot_unique()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.preprocessing"><code class="docutils literal notranslate"><span class="pre">Clustimage.preprocessing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.save"><code class="docutils literal notranslate"><span class="pre">Clustimage.save()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.scatter"><code class="docutils literal notranslate"><span class="pre">Clustimage.scatter()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustimage.clustimage.Clustimage.unique"><code class="docutils literal notranslate"><span class="pre">Clustimage.unique()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.basename"><code class="docutils literal notranslate"><span class="pre">basename()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.cluster_datetimes"><code class="docutils literal notranslate"><span class="pre">cluster_datetimes()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.cluster_latlon"><code class="docutils literal notranslate"><span class="pre">cluster_latlon()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.create_targetdir"><code class="docutils literal notranslate"><span class="pre">create_targetdir()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.disable_tqdm"><code class="docutils literal notranslate"><span class="pre">disable_tqdm()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.get_params_hash"><code class="docutils literal notranslate"><span class="pre">get_params_hash()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.img_flatten"><code class="docutils literal notranslate"><span class="pre">img_flatten()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.import_example"><code class="docutils literal notranslate"><span class="pre">import_example()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.imresize"><code class="docutils literal notranslate"><span class="pre">imresize()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.imscale"><code class="docutils literal notranslate"><span class="pre">imscale()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.listdir"><code class="docutils literal notranslate"><span class="pre">listdir()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.move_files"><code class="docutils literal notranslate"><span class="pre">move_files()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.seperate_path"><code class="docutils literal notranslate"><span class="pre">seperate_path()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.set_logger"><code class="docutils literal notranslate"><span class="pre">set_logger()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.store_to_disk"><code class="docutils literal notranslate"><span class="pre">store_to_disk()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.unique_no_sort"><code class="docutils literal notranslate"><span class="pre">unique_no_sort()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustimage.clustimage.url2disk"><code class="docutils literal notranslate"><span class="pre">url2disk()</span></code></a></li>
</ul>
</li>
</ul>

    <a href= "genindex.html">Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">clustimage</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">API References</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/clustimage.clustimage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-clustimage.clustimage">
<span id="api-references"></span><h1>API References<a class="headerlink" href="#module-clustimage.clustimage" title="Link to this heading"></a></h1>
<p>Python package clustimage is for unsupervised clustering of images.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">Clustimage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pca'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tsne'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayscale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(128,</span> <span class="pre">128)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim_face</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(64,</span> <span class="pre">64)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_to_disk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['png',</span> <span class="pre">'tiff',</span> <span class="pre">'tif',</span> <span class="pre">'jpg',</span> <span class="pre">'jpeg',</span> <span class="pre">'heic']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_pca</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'n_components':</span> <span class="pre">0.95}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_hog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'cells_per_block':</span> <span class="pre">(1,</span> <span class="pre">1),</span> <span class="pre">'orientations':</span> <span class="pre">8,</span> <span class="pre">'pixels_per_cell':</span> <span class="pre">(8,</span> <span class="pre">8)}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'hash_size':</span> <span class="pre">8,</span> <span class="pre">'threshold':</span> <span class="pre">0}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_exif</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'exif_location':</span> <span class="pre">False,</span> <span class="pre">'min_samples':</span> <span class="pre">2,</span> <span class="pre">'radius_meters':</span> <span class="pre">1000,</span> <span class="pre">'timeframe':</span> <span class="pre">5}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'info'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage" title="Link to this definition"></a></dt>
<dd><p>Clustering of images.</p>
<p>Clustering input images after following steps of pre-processing, feature-extracting, feature-embedding and cluster-evaluation.
Taking all these steps requires setting various input parameters. Not all input parameters can be changed across the different steps in clustimage.
Some parameters are choosen based on best practice, some parameters are optimized, while others are set as a constant.</p>
<p>The following 4 steps are taken:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Step 1. Pre-processing.</dt><dd><p>Images are imported with specific extention ([‘png’, ‘tiff’, ‘tif’, ‘jpg’, ‘jpeg’, ‘heic’]),
Each input image can then be grayscaled. Setting the grayscale parameter to True can be especially usefull when clustering faces.
Final step in pre-processing is resizing all images in the same dimension such as (128,128). Note that if an array-like dataset [Samples x Features] is given as input, setting these dimensions are required to restore the image in case of plotting.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Step 2. Feature-extraction.</dt><dd><p>Features are extracted from the images using Principal component analysis (PCA), Histogram of Oriented Gradients (HOG) or the raw values are used.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Step 3. Embedding:</dt><dd><p>The feature-space non-lineair transformed using t-SNE and the coordinates are stored. The embedding is only used for visualization purposes.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Step 4. Cluster evaluation.</dt><dd><p>The feature-space is used as an input in the cluster-evaluation method. The cluster evaluation method determines the optimal number of clusters and return the cluster labels.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Step 5: Save.</dt><dd><p>The results are stored in the object and returned by the model. Various different (scatter) plots can be made to evaluate the results.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'pca'</em><em>)</em>) – <dl>
<dt>Method to be usd to extract features from images.</dt><dd><ul>
<li><p>None : No feature extraction</p></li>
<li><p>’pca’ : PCA feature extraction</p></li>
<li><p>’hog’ : hog features extraced</p></li>
<li><p>’pca-hog’ : PCA extracted features from the HOG desriptor</p></li>
<li><p>’exif’: Use photo exif data to cluster photos on datetime  (set params_exif)</p></li>
</ul>
<p>hashmethod : str (default: ‘ahash’)
* ‘ahash’: Average hash
* ‘phash’: Perceptual hash
* ‘dhash’: Difference hash
* ‘whash-haar’: Haar wavelet hash
* ‘whash-db4’: Daubechies wavelet hash
* ‘colorhash’: HSV color hash
* ‘crop-resistant-hash’: Crop-resistant hash</p>
</dd>
</dl>
</p></li>
<li><p><strong>embedding</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'tsne'</em><em>)</em>) – <dl class="simple">
<dt>Perform embedding on the extracted features. The xycoordinates are used for plotting purposes. For UMAP; all default settings are used, and with densmap=True.</dt><dd><ul>
<li><p>’tsne’</p></li>
<li><p>’umap’</p></li>
<li><p>None</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>grayscale</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – Colorscaling the image to gray. This can be usefull when clustering e.g., faces.</p></li>
<li><p><strong>dim</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>128</em><em>,</em><em>128</em><em>)</em><em>)</em>) – Rescale images. This is required because the feature-space need to be the same across samples.</p></li>
<li><p><strong>dirpath</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'clustimage'</em><em>)</em>) – Directory to write images. The default is the system tempdirectory.</p></li>
<li><p><strong>ext</strong> (<em>list</em><em>, </em><em>(</em><em>default:</em><em> [</em><em>'png'</em><em>, </em><em>'tiff'</em><em>, </em><em>'tif'</em><em>, </em><em>'jpg'</em><em>, </em><em>'jpeg'</em><em>, </em><em>'heic'</em><em>]</em><em>)</em>) – Images with the file extentions are used.</p></li>
<li><p><strong>params_pca</strong> (<em>dict</em><em>, </em><em>default: {'n_components':50</em><em>, </em><em>'detect_outliers':None}</em>) – Parameters to initialize the pca model.</p></li>
<li><p><strong>params_hog</strong> (<em>dict</em><em>, </em><em>default: {'orientations':9</em><em>, </em><em>'pixels_per_cell':</em><em>(</em><em>16</em><em>,</em><em>16</em><em>)</em><em>, </em><em>'cells_per_block':</em><em>(</em><em>1</em><em>,</em><em>1</em><em>)</em><em>}</em>) – Parameters to extract hog features.</p></li>
<li><p><strong>params_exif</strong> (<em>dict</em><em>, </em><em>default: {'timeframe': 5</em><em>, </em><em>'radius_meters': 1000</em><em>, </em><em>'min_samples': 2</em><em>, </em><em>'exif_location': False}</em>) – Parameters to proces exif information.
- ‘timeframe’: Timeframe in hours that a photo is grouped together.
- ‘radius_meters’: The radius that is used to cluster the images when using metric=’datetime’
- ‘min_samples’: Minimun number of samples per cluster
- ‘exif_location’: This function makes requests to derive the location such as streetname etc. Note that the request rate per photo limited to 1 sec to prevent time-outs. It requires photos with lat/lon coordinates.</p></li>
<li><p><strong>verbose</strong> (<em>int</em><em>, </em><em>(</em><em>default: 'info'</em><em>)</em>) – Print progress to screen. The default is 20.
60: None, 40: error, 30: warning, 20: info, 10: debug</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul>
<li><p><em>Object.</em></p></li>
<li><p><strong>model</strong> (<em>dict</em>) – dict containing keys with results.
feat : array-like.</p>
<blockquote>
<div><p>Features extracted from the input-images</p>
</div></blockquote>
<dl class="simple">
<dt>xycoord<span class="classifier">array-like.</span></dt><dd><p>x,y coordinates after embedding or alternatively the first 2 features.</p>
</dd>
<dt>pathnames<span class="classifier">list of str.</span></dt><dd><p>Full path to images that are used in the model.</p>
</dd>
<dt>filenames<span class="classifier">list of str.</span></dt><dd><p>Filename of the input images.</p>
</dd>
<dt>labels<span class="classifier">list.</span></dt><dd><p>Cluster labels</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init with default settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pca&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load example with faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;mnist&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster digits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster evaluation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;xycoord&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">plot_silhouette</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;xycoord&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">pca</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Unique</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_unique</span><span class="p">(</span><span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">results_unique</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Scatter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">zoom</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">plt_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot clustered images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot dendrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">dendrogram</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_find</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span> <span class="n">k</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_find</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.clean_files">
<span class="sig-name descname"><span class="pre">clean_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clean_tempdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.clean_files" title="Link to this definition"></a></dt>
<dd><p>Clean files.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.clean_init">
<span class="sig-name descname"><span class="pre">clean_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.clean_init" title="Link to this definition"></a></dt>
<dd><p>Clean or removing previous results and models to ensure correct working.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.cluster">
<span class="sig-name descname"><span class="pre">cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'agglomerative'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'silhouette'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ward'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_clust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_clust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_space</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'high'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.cluster" title="Link to this definition"></a></dt>
<dd><p>Detect the optimal number of clusters given the input set of features.</p>
<p>This function is build on clusteval, which is a python package that provides various evalution methods for unsupervised cluster validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_space</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'high'</em><em>)</em>) – <dl class="simple">
<dt>Selection of the features that are used for clustering. This can either be on high or low feature space.</dt><dd><ul>
<li><p>’high’ : Original feature space.</p></li>
<li><p>’low’ : Input are the xycoordinates that are determined by “embedding”. Thus either tSNE coordinates or the first two PCs or HOGH features.</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>cluster</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'agglomerative'</em><em>)</em>) – <dl class="simple">
<dt>Type of clustering.</dt><dd><ul>
<li><p>’agglomerative’</p></li>
<li><p>’kmeans’</p></li>
<li><p>’dbscan’</p></li>
<li><p>’hdbscan’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>evaluate</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'silhouette'</em><em>)</em>) – <dl class="simple">
<dt>Cluster evaluation method.</dt><dd><ul>
<li><p>’silhouette’</p></li>
<li><p>’dbindex’</p></li>
<li><p>’derivative’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>metric</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'euclidean'</em><em>)</em><em>.</em>) – <dl class="simple">
<dt>Distance measures. All metrics from sklearn can be used such as:</dt><dd><ul>
<li><p>’euclidean’</p></li>
<li><p>’hamming’</p></li>
<li><p>’cityblock’</p></li>
<li><p>’correlation’</p></li>
<li><p>’cosine’</p></li>
<li><p>’jaccard’</p></li>
<li><p>’mahalanobis’</p></li>
<li><p>’seuclidean’</p></li>
<li><p>’sqeuclidean’</p></li>
<li><p>’datetime’: Use photo exif data to cluster photos on datetime (set params_exif)</p></li>
<li><p>’latlon’: Use photo exif data to cluster photos on lon/lat coordinates (set params_exif)</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>linkage</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'ward'</em><em>)</em>) – <dl class="simple">
<dt>Linkage type for the clustering.</dt><dd><ul>
<li><p>’ward’</p></li>
<li><p>’single’</p></li>
<li><p>’complete’</p></li>
<li><p>’average’</p></li>
<li><p>’weighted’</p></li>
<li><p>’centroid’</p></li>
<li><p>’median’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>min_clust</strong> (<em>int</em><em>, </em><em>(</em><em>default: 3</em><em>)</em>) – Number of clusters that is evaluated greater or equals to min_clust.</p></li>
<li><p><strong>max_clust</strong> (<em>int</em><em>, </em><em>(</em><em>default: 25</em><em>)</em>) – Number of clusters that is evaluated smaller or equals to max_clust.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>.results[‘labels’] : Cluster labels.
.clusteval : model parameters for cluster-evaluation and plotting.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;hog&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load example with digits (mnist dataset)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;flowers&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find clusters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">pathnames</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Evaluate plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dotsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Change the clustering evaluation approach, metric, minimum expected nr. of clusters etc.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">min_clust</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_clust</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Evaluate plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dotsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># If you want to cluster on the low-dimensional space.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">min_clust</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_clust</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">cluster_space</span><span class="o">=</span><span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">cluster</span><span class="o">=</span><span class="s1">&#39;dbscan&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dotsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.compute_hash">
<span class="sig-name descname"><span class="pre">compute_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.compute_hash" title="Link to this definition"></a></dt>
<dd><p>Compute hash.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>img</strong> (<em>numpy-array</em>) – Image.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>imghash</strong> – Hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy-array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.dendrogram">
<span class="sig-name descname"><span class="pre">dendrogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.dendrogram" title="Link to this definition"></a></dt>
<dd><p>Plot Dendrogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_d</strong> (<em>Float</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Height of the dendrogram to make a horizontal cut-off line.</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>15</em><em>, </em><em>10</em><em>)</em><em>.</em>) – Size of the figure (height,width).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>results</strong> – Cluster labels.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.embedding">
<span class="sig-name descname"><span class="pre">embedding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.embedding" title="Link to this definition"></a></dt>
<dd><p>Compute embedding for the extracted features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like</em>) – NxM array for which N are the samples and M the features.</p></li>
<li><p><strong>metric</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'euclidean'</em><em>)</em><em>.</em>) – <dl class="simple">
<dt>Distance measures. All metrics from sklearn can be used such as:</dt><dd><ul>
<li><p>’euclidean’</p></li>
<li><p>’hamming’</p></li>
<li><p>’cityblock’</p></li>
<li><p>’correlation’</p></li>
<li><p>’cosine’</p></li>
<li><p>’jaccard’</p></li>
<li><p>’mahalanobis’</p></li>
<li><p>’seuclidean’</p></li>
<li><p>’sqeuclidean’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>embedding</strong> (<em>str</em><em>, </em><em>(</em><em>default: retrieve from init</em><em>)</em>) – <p>Perform embedding on the extracted features. The xycoordinates are used for plotting purposes.
For UMAP parameters set set to default with densmap=True.</p>
<blockquote>
<div><ul>
<li><p>’tsne’</p></li>
<li><p>’umap’</p></li>
<li><p>None: Return the first to axis of input data X.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>xycoord</strong> – x,y coordinates after embedding or alternatively the first 2 features.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.extract_faces">
<span class="sig-name descname"><span class="pre">extract_faces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathnames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.extract_faces" title="Link to this definition"></a></dt>
<dd><p>Detect and extract faces from images.</p>
<p>To cluster faces on images, we need to detect, and extract the faces from the images which is done in this function.
Faces and eyes are detected using <code class="docutils literal notranslate"><span class="pre">haarcascade_frontalface_default.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">haarcascade_eye.xml</span></code> in <code class="docutils literal notranslate"><span class="pre">python-opencv</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pathnames</strong> (<em>list</em><em> of </em><em>str.</em>) – Full path to images that are used in the model.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul>
<li><p><em>Object.</em></p></li>
<li><p><strong>model</strong> (<em>dict</em>) – dict containing keys with results.
pathnames : list of str.</p>
<blockquote>
<div><p>Full path to images that are used in the model.</p>
</div></blockquote>
<dl class="simple">
<dt>filenames<span class="classifier">list of str.</span></dt><dd><p>Filename of the input images.</p>
</dd>
<dt>pathnames_face<span class="classifier">list of str.</span></dt><dd><p>Filename of the extracted faces that are stored to disk.</p>
</dd>
<dt>img<span class="classifier">array-like.</span></dt><dd><p>NxMxC for which N are the Samples, M the features and C the number of channels.</p>
</dd>
<dt>coord_faces<span class="classifier">array-like.</span></dt><dd><p>list of lists containing coordinates fo the faces in the original image.</p>
</dd>
<dt>coord_eyes<span class="classifier">array-like.</span></dt><dd><p>list of lists containing coordinates fo the eyes in the extracted (img and pathnames_face) image.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init with default settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pca&#39;</span><span class="p">,</span> <span class="n">grayscale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Detect faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">face_results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">extract_faces</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;c://temp//my_photos//&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames_face</span> <span class="o">=</span> <span class="n">face_results</span><span class="p">[</span><span class="s1">&#39;pathnames_face&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot facces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_faces</span><span class="p">(</span><span class="n">faces</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">eyes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load example with faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames_face</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;faces&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster the faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">pathnames_face</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.extract_feat">
<span class="sig-name descname"><span class="pre">extract_feat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xraw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.extract_feat" title="Link to this definition"></a></dt>
<dd><p>Extract features based on the input data X.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Xraw</strong> (<em>dict containing keys:</em>) – img : array-like.
pathnames : list of str.
filenames : list of str.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>X</strong> – Extracted features.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.extract_hog">
<span class="sig-name descname"><span class="pre">extract_hog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orientations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixels_per_cell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(16,</span> <span class="pre">16)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cells_per_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.extract_hog" title="Link to this definition"></a></dt>
<dd><p>Extract HOG features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>X</strong> (<em>array-like</em>) – NxM array for which N are the samples and M the features.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>feat</strong> – NxF array for which N are the samples and F the reduced feature space.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;hog&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load example data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;flowers&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Read image according the preprocessing steps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">pathnames</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dim</span><span class="o">=</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Extract HOG features</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img_hog</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">extract_hog</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span><span class="n">axs</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Preprocessed image&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_hog</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;HOG&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.extract_pca">
<span class="sig-name descname"><span class="pre">extract_pca</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.extract_pca" title="Link to this definition"></a></dt>
<dd><p>Extract Principal Components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>X</strong> (<em>array-like</em>) – NxM array for which N are the samples and M the features.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>feat</strong> – NxF array for which N are the samples and F the reduced feature space.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.find">
<span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xnew</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.find" title="Link to this definition"></a></dt>
<dd><p>Find images that are similar to that of the input image.</p>
<p>Finding images can be performed in two manners:</p>
<blockquote>
<div><ul class="simple">
<li><p>Based on the k-nearest neighbour</p></li>
<li><p>Based on significance after probability density fitting</p></li>
</ul>
</div></blockquote>
<p>In both cases, the adjacency matrix is first computed using the distance metric (default Euclidean).
In case of the k-nearest neighbour approach, the k nearest neighbours are determined.
In case of significance, the adjacency matrix is used to to estimate the best fit for the loc/scale/arg parameters across various theoretical distribution.
The tested disributions are <em>[‘norm’, ‘expon’, ‘uniform’, ‘gamma’, ‘t’]</em>. The fitted distribution is basically the similarity-distribution of samples.
For each new (unseen) input image, the probability of similarity is computed across all images, and the images are returned that are P &lt;= <em>alpha</em> in the lower bound of the distribution.
If case both <em>k</em> and <em>alpha</em> are specified, the union of detected samples is taken.
Note that the metric can be changed in this function but this may lead to confusions as the results will not intuitively match with the scatter plots as these are determined using metric in the fit_transform() function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathnames</strong> (<em>list</em><em> of </em><em>str.</em>) – Full path to images that are used in the model.</p></li>
<li><p><strong>metric</strong> (<em>str</em><em>, </em><em>(</em><em>default: the input</em><em> of </em><em>fit_transform</em><em>(</em><em>)</em><em>)</em><em>.</em>) – <dl class="simple">
<dt>Distance measures. All metrics from sklearn can be used such as:</dt><dd><ul>
<li><p>’euclidean’</p></li>
<li><p>’hamming’</p></li>
<li><p>’cityblock’</p></li>
<li><p>’correlation’</p></li>
<li><p>’cosine’</p></li>
<li><p>’jaccard’</p></li>
<li><p>’mahalanobis’</p></li>
<li><p>’seuclidean’</p></li>
<li><p>’sqeuclidean’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>k</strong> (<em>int</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – The k-nearest neighbour.</p></li>
<li><p><strong>alpha</strong> (<em>float</em><em>, </em><em>default: 0.05</em>) – Significance alpha.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>y_idx<span class="classifier">list.</span></dt><dd><p>Index of the detected/predicted images.</p>
</dd>
<dt>distance<span class="classifier">list.</span></dt><dd><p>Absolute distance to the input image.</p>
</dd>
<dt>y_proba<span class="classifier">list</span></dt><dd><p>Probability of similarity to the input image.</p>
</dd>
<dt>y_filenames<span class="classifier">list.</span></dt><dd><p>filename of the detected image.</p>
</dd>
<dt>y_pathnames<span class="classifier">list.</span></dt><dd><p>Pathname to the detected image.</p>
</dd>
<dt>x_pathnames<span class="classifier">list.</span></dt><dd><p>Pathname to the input image.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict containing keys with each input image that contains the following results.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init with default settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pca&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load example with faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;mnist&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster digits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_find</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span> <span class="n">k</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_find</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">zoom</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.fit_transform">
<span class="sig-name descname"><span class="pre">fit_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'agglomerative'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'silhouette'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ward'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_clust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_clust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_space</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'high'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.fit_transform" title="Link to this definition"></a></dt>
<dd><p>Group samples into clusters that are similar in their feature space.</p>
<p>The fit_transform function allows to detect natural groups or clusters of images. It works using a multi-step proces of pre-processing, extracting the features, and evaluating the optimal number of clusters across the feature space.
The optimal number of clusters are determined using well known methods suchs as <em>silhouette, dbindex, and derivatives</em> in combination with clustering methods, such as <em>agglomerative, kmeans, dbscan and hdbscan</em>.
Based on the clustering results, the unique images are also gathered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>[</em><em>str</em><em> of </em><em>list</em><em>] or </em><em>[</em><em>np.array</em><em>]</em><em>.</em>) – <dl class="simple">
<dt>The input can be:</dt><dd><ul>
<li><p>”c://temp//” : Path to directory with images</p></li>
<li><p>[‘c://temp//image1.png’, ‘c://image2.png’, …] : List of exact pathnames.</p></li>
<li><p>[[.., ..], [.., ..], …] : np.array matrix in the form of [sampels x features]</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>cluster</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'agglomerative'</em><em>)</em>) – <dl class="simple">
<dt>Type of clustering.</dt><dd><ul>
<li><p>’agglomerative’</p></li>
<li><p>’kmeans’</p></li>
<li><p>’dbscan’</p></li>
<li><p>’hdbscan’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>evaluate</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'silhouette'</em><em>)</em>) – <dl class="simple">
<dt>Cluster evaluation method.</dt><dd><ul>
<li><p>’silhouette’</p></li>
<li><p>’dbindex’</p></li>
<li><p>’derivative’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>metric</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'euclidean'</em><em>)</em><em>.</em>) – <dl class="simple">
<dt>Distance measures. All metrics from sklearn can be used such as:</dt><dd><ul>
<li><p>’euclidean’</p></li>
<li><p>’hamming’</p></li>
<li><p>’cityblock’</p></li>
<li><p>’correlation’</p></li>
<li><p>’cosine’</p></li>
<li><p>’jaccard’</p></li>
<li><p>’mahalanobis’</p></li>
<li><p>’seuclidean’</p></li>
<li><p>’sqeuclidean’</p></li>
<li><p>’datetime’: Use photo exif data to cluster photos on datetime (set params_exif)</p></li>
<li><p>’latlon’: Use photo exif data to cluster photos on lon/lat coordinates (set params_exif)</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>linkage</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'ward'</em><em>)</em>) – <dl class="simple">
<dt>Linkage type for the clustering.</dt><dd><ul>
<li><p>’ward’</p></li>
<li><p>’single’</p></li>
<li><p>’complete’</p></li>
<li><p>’average’</p></li>
<li><p>’weighted’</p></li>
<li><p>’centroid’</p></li>
<li><p>’median’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>min_clust</strong> (<em>int</em><em>, </em><em>(</em><em>default: 3</em><em>)</em>) – Number of clusters that is evaluated greater or equals to min_clust.</p></li>
<li><p><strong>max_clust</strong> (<em>int</em><em>, </em><em>(</em><em>default: 25</em><em>)</em>) – Number of clusters that is evaluated smaller or equals to max_clust.</p></li>
<li><p><strong>cluster_space</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'high'</em><em>)</em>) – <dl class="simple">
<dt>Selection of the features that are used for clustering. This can either be on high or low feature space.</dt><dd><ul>
<li><p>’high’ : Original feature space.</p></li>
<li><p>’low’ : Input are the xycoordinates that are determined by “embedding”. Thus either tSNE coordinates or the first two PCs or HOGH features.</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>black_list</strong> (<em>list</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Exclude directory with all subdirectories from processing.
* example: [‘undouble’]</p></li>
<li><p><strong>recursive</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to scan subdirectories recursively. Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul>
<li><p><em>Object.</em></p></li>
<li><p><strong>model</strong> (<em>dict</em>) – dict containing keys with results.
feat : array-like.</p>
<blockquote>
<div><p>Features extracted from the input-images</p>
</div></blockquote>
<dl class="simple">
<dt>xycoord<span class="classifier">array-like.</span></dt><dd><p>x,y coordinates after embedding or alternatively the first 2 features.</p>
</dd>
<dt>pathnames<span class="classifier">list of str.</span></dt><dd><p>Full path to images that are used in the model.</p>
</dd>
<dt>filenames<span class="classifier">list of str.</span></dt><dd><p>Filename of the input images.</p>
</dd>
<dt>labels<span class="classifier">list.</span></dt><dd><p>Cluster labels</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init with default settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pca&#39;</span><span class="p">,</span> <span class="n">grayscale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load example with faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;faces&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Detect faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">face_results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">extract_faces</span><span class="p">(</span><span class="n">pathnames</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster extracted faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">face_results</span><span class="p">[</span><span class="s1">&#39;pathnames_face&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster evaluation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">clusteval</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">cl</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;xycoord&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Unique</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_unique</span><span class="p">(</span><span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">results_unique</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Scatter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dotsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot clustered images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot facces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_faces</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot dendrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">dendrogram</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_find</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">face_results</span><span class="p">[</span><span class="s1">&#39;pathnames_face&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_find</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">pca</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.get_dim">
<span class="sig-name descname"><span class="pre">get_dim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xraw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.get_dim" title="Link to this definition"></a></dt>
<dd><p>Determine dimension for image vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Xraw</strong> (<em>array-like float</em>) – Image vector.</p></li>
<li><p><strong>dim</strong> (<em>tuple</em><em> (</em><em>int</em><em>, </em><em>int</em><em>)</em>) – Dimension of the image.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.import_data">
<span class="sig-name descname"><span class="pre">import_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xraw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.import_data" title="Link to this definition"></a></dt>
<dd><p>Import images and return in an consistent manner.</p>
<p>The input for the import_data() can have multiple forms; path to directory, list of strings and and array-like input.
This requires that each of the input needs to be processed in its own manner but each should return the same structure to make it compatible across all functions.
The following steps are used for the import:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Images are imported with specific extention ([‘png’, ‘tiff’, ‘tif’, ‘jpg’, ‘jpeg’, ‘heic’]).</p></li>
<li><p>Each input image can then be grayscaled. Setting the grayscale parameter to True can be especially usefull when clustering faces.</p></li>
<li><p>Final step in pre-processing is resizing all images in the same dimension such as (128,128). Note that if an array-like dataset [Samples x Features] is given as input, setting these dimensions are required to restore the image in case of plotting.</p></li>
<li><p>Images are saved to disk in case a array-like input is given.</p></li>
<li><p>Independent of the input, a dict is returned in a consistent manner.</p></li>
</ol>
</div></blockquote>
<p>Processing the input depends on the input:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Xraw</strong> (<em>str</em><em>, </em><em>list</em><em> or </em><em>array-like.</em>) – <dl class="simple">
<dt>The input can be:</dt><dd><ul>
<li><p>”c://temp//” : Path to directory with images</p></li>
<li><p>[‘c://temp//image1.png’, ‘c://image2.png’, …] : List of exact pathnames.</p></li>
<li><p>[[.., ..], [.., ..], …] : Array-like matrix in the form of [sampels x features]</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>flatten</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Flatten the processed NxMxC array to a 1D-vector</p></li>
<li><p><strong>black_list</strong> (<em>list</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Exclude directory with all subdirectories from processing.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to scan subdirectories recursively. Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul>
<li><p><em>Object.</em></p></li>
<li><p><strong>model</strong> (<em>dict</em>) – dict containing keys with results.
img : array-like.</p>
<blockquote>
<div><p>Pre-processed images</p>
</div></blockquote>
<dl class="simple">
<dt>pathnames<span class="classifier">list of str.</span></dt><dd><p>Full path to images that are used in the model.</p>
</dd>
<dt>filenames<span class="classifier">list of str.</span></dt><dd><p>Filename of the input images.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.import_example">
<span class="sig-name descname"><span class="pre">import_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'flowers'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">','</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.import_example" title="Link to this definition"></a></dt>
<dd><p>Import example dataset from github source.</p>
<p>Import one of the datasets from github source or specify your own download url link.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>str</em>) – <dl class="simple">
<dt>Images:</dt><dd><ul>
<li><p>’faces’</p></li>
<li><p>’mnist’</p></li>
</ul>
</dd>
<dt>Files with images:</dt><dd><ul>
<li><p>’southern_nebula’</p></li>
<li><p>’flowers’</p></li>
<li><p>’scenes’</p></li>
<li><p>’cat_and_dog’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>url</strong> (<em>str</em>) – url link to to dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of str containing filepath to images.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.imread">
<span class="sig-name descname"><span class="pre">imread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorscale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(128,</span> <span class="pre">128)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_succes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.imread" title="Link to this definition"></a></dt>
<dd><p>Read and pre-processing of images.</p>
<dl class="simple">
<dt>The pre-processing has 4 steps and are exectued in this order.</dt><dd><ul class="simple">
<li><ol class="arabic simple">
<li><p>Import data.</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>Conversion to gray-scale (user defined)</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="3">
<li><p>Scaling color pixels between [0-255]</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="4">
<li><p>Resizing</p></li>
</ol>
</li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em>) – Full path to the image that needs to be imported.</p></li>
<li><p><strong>colorscale</strong> (<em>int</em><em>, </em><em>default: 1</em><em> (</em><em>gray</em><em>)</em>) – colour-scaling from opencv.
* 0: cv2.IMREAD_GRAYSCALE
* 1: cv2.IMREAD_COLOR
* 2: cv2.IMREAD_ANYDEPTH
* 8: cv2.COLOR_GRAY2RGB
* -1: cv2.IMREAD_UNCHANGED</p></li>
<li><p><strong>dim</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>128</em><em>,</em><em>128</em><em>)</em><em>)</em>) – Rescale images. This is required because the feature-space need to be the same across samples.</p></li>
<li><p><strong>flatten</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Flatten the processed NxMxC array to a 1D-vector</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>img</strong> – Imported and processed image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import libraries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load example dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;flowers&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Preprocessing of the first image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">pathnames</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dim</span><span class="o">=</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">),</span> <span class="n">colorscale</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">pathnames</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'clustimage.pkl'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.load" title="Link to this definition"></a></dt>
<dd><p>Restore previous results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em>) – Pathname to stored pickle files.</p></li>
<li><p><strong>verbose</strong> (<em>int</em><em>, </em><em>optional</em>) – Show message. A higher number gives more information. The default is 3.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.move_to_dir">
<span class="sig-name descname"><span class="pre">move_to_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.move_to_dir" title="Link to this definition"></a></dt>
<dd><p>Move image files into directories based on cluster labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_labels</strong> (<em>dict</em><em>, </em><em>optional</em>) – A dictionary where keys are cluster labels, and values are the target folder names.
If None, folders are automatically generated with names such as “group_&lt;label&gt;”.</p></li>
<li><p><strong>targetdir</strong> (<em>str</em><em>, </em><em>optional</em>) – The base directory where the images will be moved. If None, the images will be moved
to the parent directory of their current location.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>If <cite>target_labels</cite> is not provided, the function will automatically generate folder names based on the cluster labels, e.g., <cite>group_0</cite>, <cite>group_1</cite>, etc.</p></li>
<li><p>The method will move image files associated with each cluster into the corresponding folder.</p></li>
<li><p>Before moving files, the user is prompted to confirm the action for each cluster.</p></li>
<li><p>The function assumes that <cite>self.results</cite> contains the necessary data, including ‘labels’ (cluster labels) and ‘pathnames’ (file paths of the images).</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Assuming `self.results` contains a &#39;labels&#39; and &#39;pathnames&#39; column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">move_to_dir</span><span class="p">(</span><span class="n">target_labels</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;screenshots&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;various&#39;</span><span class="p">},</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;holiday break&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Images from cluster 0 will be moved to &quot;group_0&quot; and images from cluster 1 to &quot;group_1&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_hog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_clust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blacklist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.plot" title="Link to this definition"></a></dt>
<dd><p>Plot the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<em>list</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Cluster label to plot. In case of None, all cluster labels are plotted.</p></li>
<li><p><strong>ncols</strong> (<em>int</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Number of columns to use in the subplot. The number of rows are estimated based on the columns.</p></li>
<li><p><strong>images.</strong> (<em>Colorscheme for the</em>) – ‘gray’, ‘binary’,  None (uses rgb colorscheme)</p></li>
<li><p><strong>show_hog</strong> (<em>bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – Plot the hog features next to the input image.</p></li>
<li><p><strong>min_clust</strong> (<em>int</em><em>, </em><em>(</em><em>default: 1</em><em>)</em>) – Plots are created for clusters with &gt;= min_clust samples</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>15</em><em>, </em><em>10</em><em>)</em><em>.</em>) – Size of the figure (height,width).</p></li>
<li><p><strong>blacklist</strong> (<em>list</em>) – None: Show all cluster labels
[-2]: do not show the samples without lat/lon coordinates (when using exif method)
[-1]: do not show the samples that fall outside the clusters (noise or rest-group in DBSCAN, when using exif method)
[-2, -1]: do not show multiple clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.plot_faces">
<span class="sig-name descname"><span class="pre">plot_faces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">faces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eyes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.plot_faces" title="Link to this definition"></a></dt>
<dd><p>Plot detected faces.</p>
<p>Plot the detected faces in images after using the fit_transform() function.
* For each input image, rectangles are drawn over the detected faces.
* Each face is plotted seperately for which rectlangles are drawn over the detected eyes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>faces</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Plot the seperate faces.</p></li>
<li><p><strong>eyes</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Plot rectangles over the detected eyes.</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – <dl class="simple">
<dt>Colorscheme for the images.</dt><dd><ul>
<li><p>’gray’</p></li>
<li><p>’binary’</p></li>
<li><p>None : uses rgb colorscheme</p></li>
</ul>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.plot_find">
<span class="sig-name descname"><span class="pre">plot_find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.plot_find" title="Link to this definition"></a></dt>
<dd><p>Plot the input image together with the predicted images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Colorscheme for the images.
‘gray’, ‘binary’,  None (uses rgb colorscheme)</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>15</em><em>, </em><em>10</em><em>)</em><em>.</em>) – Size of the figure (height,width).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.plot_map">
<span class="sig-name descname"><span class="pre">plot_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_icons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polygon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thumbnail_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blacklist_polygon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[-1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clutter_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_in_browser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.plot_map" title="Link to this definition"></a></dt>
<dd><p>Plot a map with clustered images using their EXIF metadata.</p>
<p>This function generates an interactive map using folium, where images are plotted
based on their geographic coordinates extracted from EXIF data. Images are rescaled
to thumbnails for display. The function supports saving the map as an HTML file and
optionally opening it in a web browser.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_icons</strong> (<em>bool</em><em>, </em><em>optional</em>) – Cluster icons on the map.
- None: automaticaly set the boolean based on metric
- True: Cluster icons when zooming. Note that the location is not exact anymore.
- False: Do not cluster icons and show the exact location on the map.</p></li>
<li><p><strong>polygon</strong> (<em>bool</em><em>, </em><em>optional</em>) – Create a line through the list of geographic points defining a polygon to overlay on the map.
- None: automaticaly set the boolean based on metric
- True: Create polygon line
- False: Do not create polygon line</p></li>
<li><p><strong>thumbnail_size</strong> (<em>int</em><em>, </em><em>optional</em>) – The size of the thumbnails (in pixels) to display on the map. Default is <cite>400</cite>.</p></li>
<li><p><strong>blacklist_polygon</strong> (<em>list</em><em>, </em><em>optional</em>) – Shows the polygon line for all clusters except the blacklisted ones.
[-1]: Default as these are the rest or noise images from DBSCAN.</p></li>
<li><p><strong>clutter_threshold</strong> (<em>float: 1e-4</em>) – The maximum distance below which points are considered overlapping. So this will prevent that icons are exactly on top of each other.</p></li>
<li><p><strong>save_path</strong> (<em>str</em><em>, </em><em>optional</em>) – The file path (including filename) where the map will be saved as an HTML file.
If <cite>None</cite>, the map is saved in a temporary directory. Default is <cite>None</cite>.</p></li>
<li><p><strong>open_in_browser</strong> (<em>bool</em><em>, </em><em>optional</em>) – True: automatically opens the generated map in the default web browser.
False: Do not open in browser automatically.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing:
- <cite>m</cite> (folium.Map): The generated folium map object.
- <cite>save_path</cite> (str): The file path where the map was saved.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This function requires the <cite>exif</cite> method to be used in the <cite>params</cite>. If another method is used,
the function will log an error and return <cite>None</cite>.</p></li>
<li><p>The <cite>save_path</cite> must include both the directory and filename. If only the directory is provided
or the directory does not exist, an error is logged, and the function returns <cite>None</cite>.</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;exif&#39;</span><span class="p">,</span>
<span class="go">                params_exif = {&#39;timeframe&#39;: 5, &#39;radius_meters&#39;: 1000, &#39;min_samples&#39;: 2, &#39;exif_location&#39;: False},</span>
<span class="go">                ext=[&quot;jpg&quot;, &quot;jpeg&quot;, &quot;png&quot;, &quot;tiff&quot;, &quot;bmp&quot;, &quot;gif&quot;, &quot;webp&quot;, &quot;psd&quot;, &quot;raw&quot;, &quot;cr2&quot;, &quot;nef&quot;, &quot;heic&quot;, &quot;sr2&quot;, &quot;tif&quot;],</span>
<span class="go">                verbose=&#39;info&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Fit and transform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;c:/temp/&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">cluster_icons</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">polygon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">thumbnail_size</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">save_path</span><span class="o">=</span><span class="s2">&quot;C:/temp/map.html&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">open_in_browser</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.plot_unique">
<span class="sig-name descname"><span class="pre">plot_unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_hog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.plot_unique" title="Link to this definition"></a></dt>
<dd><p>Plot unique images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>(</em><em>default: None</em><em>)</em>) – Colorscheme for the images.
‘gray’, ‘binary’,  None (uses rgb colorscheme)</p></li>
<li><p><strong>img_mean</strong> (<em>bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – Plot the image mean.</p></li>
<li><p><strong>show_hog</strong> (<em>bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – Plot the hog features.</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>15</em><em>, </em><em>10</em><em>)</em><em>.</em>) – Size of the figure (height, width).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.preprocessing">
<span class="sig-name descname"><span class="pre">preprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grayscale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.preprocessing" title="Link to this definition"></a></dt>
<dd><p>Pre-processing the input images and returning consistent output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathnames</strong> (<em>list</em><em> of </em><em>str.</em>) – Full path to images that are used in the model.</p></li>
<li><p><strong>grayscale</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – Colorscaling the image to gray. This can be usefull when clustering e.g., faces.</p></li>
<li><p><strong>dim</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>128</em><em>,</em><em>128</em><em>)</em><em>)</em>) – Rescale images. This is required because the feature-space need to be the same across samples.</p></li>
<li><p><strong>flatten</strong> (<em>Bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Flatten the processed NxMxC array to a 1D-vector</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Xraw</strong> – img : array-like.
pathnames : list of str.
filenames : list of str.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict containing keys:</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'clustimage.pkl'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.save" title="Link to this definition"></a></dt>
<dd><p>Save model in pickle file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'clustimage.pkl'</em><em>)</em>) – Pathname to store pickle files.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>(</em><em>default=False</em><em>)</em>) – Overwite file if exists.</p></li>
<li><p><strong>verbose</strong> (<em>int</em><em>, </em><em>optional</em>) – Show message. A higher number gives more informatie. The default is 3.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>bool</strong> – Status whether the file is saved.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[True, False]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.scatter">
<span class="sig-name descname"><span class="pre">scatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dotsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_mean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plt_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(15,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args_scatter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.scatter" title="Link to this definition"></a></dt>
<dd><p>Plot the samples using a scatterplot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plt_all</strong> (<em>bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – False: Only plot the controid images.
True: Plot all images on top of the scatter.</p></li>
<li><p><strong>dotsize</strong> (<em>int</em><em>, </em><em>(</em><em>default: 15</em><em>)</em>) – Dot size of the scatterpoints.</p></li>
<li><p><strong>legend</strong> (<em>bool</em><em>, </em><em>(</em><em>default: False</em><em>)</em>) – Plot the legend.</p></li>
<li><p><strong>zoom</strong> (<em>bool</em><em>, </em><em>(</em><em>default: 0.3</em><em>)</em>) – Plot the image in the scatterplot.
None : Do not plot the image.</p></li>
<li><p><strong>text</strong> (<em>bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Plot the cluster labels.</p></li>
<li><p><strong>density</strong> (<em>bool</em><em>, </em><em>(</em><em>default: Fale</em><em>)</em>) – Plot the density over the clusters.</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em><em>, </em><em>(</em><em>default:</em><em> (</em><em>15</em><em>, </em><em>10</em><em>)</em><em>.</em>) – Size of the figure (height,width).</p></li>
<li><p><strong>args_scatter</strong> (<em>dict</em><em>, </em><em>default: {}.</em>) – Arguments for the scatter plot. The following are default:
{‘title’: ‘’,
‘fontsize’: 18,
‘fontcolor’: [0, 0, 0],
‘xlabel’: ‘x-axis’,
‘ylabel’: ‘y-axis’,
‘cmap’: cmap,
‘density’: False,
‘gradient’: None,
}</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple (fig, ax)</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import library</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Initialize with default settings.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import example dataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;mnist&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Run the model to find the optimal clusters.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Make scatter plots</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># More input arguments for the scatterplot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dotsize</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">args_scatter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;fontsize&#39;</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span> <span class="s1">&#39;density&#39;</span><span class="p">:</span><span class="s1">&#39;#FFFFFF&#39;</span><span class="p">,</span> <span class="s1">&#39;cmap&#39;</span><span class="p">:</span><span class="s1">&#39;Set2&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clustimage.clustimage.Clustimage.unique">
<span class="sig-name descname"><span class="pre">unique</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.Clustimage.unique" title="Link to this definition"></a></dt>
<dd><p>Compute the unique images.</p>
<p>The unique images are detected by first computing the center of the cluster, and then taking the image closest to the center.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metric</strong> (<em>str</em><em>, </em><em>(</em><em>default: 'euclidean'</em><em>)</em><em>.</em>) – <dl class="simple">
<dt>Distance measures. All metrics from sklearn can be used such as:</dt><dd><ul class="simple">
<li><p>’euclidean’</p></li>
<li><p>’hamming’</p></li>
<li><p>’cityblock’</p></li>
<li><p>’correlation’</p></li>
<li><p>’cosine’</p></li>
<li><p>’jaccard’</p></li>
<li><p>’mahalanobis’</p></li>
<li><p>’seuclidean’</p></li>
<li><p>’sqeuclidean’</p></li>
<li><p>etc</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>labels<span class="classifier">list.</span></dt><dd><p>Cluster label of the detected image.</p>
</dd>
<dt>idx<span class="classifier">list.</span></dt><dd><p>Index of the original image.</p>
</dd>
<dt>xycoord_center<span class="classifier">array-like</span></dt><dd><p>Coordinates of the sample that is most centered.</p>
</dd>
<dt>pathnames<span class="classifier">list.</span></dt><dd><p>Path location to the file.</p>
</dd>
<dt>img_mean<span class="classifier">array-like.</span></dt><dd><p>Averaged image in the cluster.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict containing keys with results.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clustimage</span> <span class="kn">import</span> <span class="n">Clustimage</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init with default settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span> <span class="o">=</span> <span class="n">Clustimage</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load example with faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">import_example</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;mnist&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cluster digits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Unique</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">plot_unique</span><span class="p">(</span><span class="n">img_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cl</span><span class="o">.</span><span class="n">results_unique</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.basename">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">basename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.basename" title="Link to this definition"></a></dt>
<dd><p>Extract basename from path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.cluster_datetimes">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">cluster_datetimes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps_hours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.cluster_datetimes" title="Link to this definition"></a></dt>
<dd><p>Clusters datetime values in a DataFrame using a time-based window with DBSCAN.
The time window is given in hours.</p>
<dl class="simple">
<dt>Parameters:</dt><dd><p>df (pd.DataFrame): Input DataFrame containing the datetime column.
datetime_column (str): The name of the column containing datetime values.
eps_hours (float): The maximum time gap (in hours) to consider points in the same cluster.
min_samples (int): The minimum number of samples in a neighborhood to form a cluster.</p>
</dd>
<dt>Returns:</dt><dd><p>pd.DataFrame: DataFrame with an added column for cluster labels.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># Example usage:
data = {</p>
<blockquote>
<div><dl class="simple">
<dt>“datetime”: [</dt><dd><p>“2024:02:16 19:35:38”, “2023:12:17 13:54:10”, “2023:12:17 11:27:52”,
“2023:12:17 11:40:22”, “2023:12:16 20:11:36”, “2024:02:16 19:37:00”,
“2024:02:16 19:37:34”, “2024:02:16 19:36:52”, “2024:02:16 19:37:34”,
“2024:02:16 19:37:16”</p>
</dd>
</dl>
<p>]</p>
</div></blockquote>
<p>}
df = pd.DataFrame(data)</p>
<p># Cluster with a 1-hour window and minimum of 2 samples per cluster
clustered_df = cluster_datetimes(df, “datetime”, eps_hours=1, min_samples=2)
print(clustered_df)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.cluster_latlon">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">cluster_latlon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_meters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.cluster_latlon" title="Link to this definition"></a></dt>
<dd><p>Cluster geolocation data points based on proximity using Haversine distance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon</strong> (<em>pandas.DataFrame</em>) – A DataFrame containing ‘lat’ (latitude) and ‘lon’ (longitude) columns.
Rows with missing values in either ‘lat’ or ‘lon’ are ignored.</p></li>
<li><p><strong>radius_meters</strong> (<em>float</em><em>, </em><em>optional</em>) – The radius (in meters) within which points are grouped into a single cluster.
Default is 1000 meters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of cluster labels for each row in the input <cite>latlon</cite> DataFrame.
Rows without valid latitude or longitude will have a label of 0.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The function uses the DBSCAN algorithm with the Haversine metric for clustering.</p></li>
<li><p>Input coordinates are converted to radians as required by the Haversine distance computation.</p></li>
<li><p>The radius is converted from meters to kilometers, as the Haversine metric operates in kilometers.</p></li>
<li><p>DBSCAN assigns cluster labels starting from -1 for noise points. This implementation labels rows without valid coordinates as -2.</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">latlon</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">52.5200</span><span class="p">,</span> <span class="mf">52.5201</span><span class="p">,</span> <span class="mf">52.5300</span><span class="p">,</span> <span class="mf">48.8566</span><span class="p">,</span> <span class="mf">48.8567</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">13.4050</span><span class="p">,</span> <span class="mf">13.4051</span><span class="p">,</span> <span class="mf">13.4060</span><span class="p">,</span> <span class="mf">2.3522</span><span class="p">,</span> <span class="mf">2.3523</span><span class="p">]</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster_labels</span> <span class="o">=</span> <span class="n">cluster_latlon</span><span class="p">(</span><span class="n">latlon</span><span class="p">,</span> <span class="n">radius_meters</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster_labels</span>
<span class="go">array([1, 1, 2, 3, 3])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.create_targetdir">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">create_targetdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.create_targetdir" title="Link to this definition"></a></dt>
<dd><p>Create directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathname</strong> (<em>str</em>) – Absolute path location of the image of interest.</p></li>
<li><p><strong>targetdir</strong> (<em>str</em>) – Target directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>movedir</strong> (<em>str</em>) – Absolute path to directory.</p></li>
<li><p><strong>dirname</strong> (<em>str</em>) – Absolute path to directory.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file.</p></li>
<li><p><strong>ext</strong> (<em>str</em>) – Extension.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.disable_tqdm">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">disable_tqdm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.disable_tqdm" title="Link to this definition"></a></dt>
<dd><p>Set the logger for verbosity messages.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.get_logger">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">get_logger</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.get_logger" title="Link to this definition"></a></dt>
<dd><p>Return logger status.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.get_params_hash">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">get_params_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hashmethod</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.get_params_hash" title="Link to this definition"></a></dt>
<dd><p>Get image hash function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hashmethod</strong> (<em>str</em><em> (</em><em>default: 'ahash'</em><em>)</em>) – ‘ahash’: Average hash
‘phash’: Perceptual hash
‘dhash’: Difference hash
‘whash-haar’: Haar wavelet hash
‘whash-db4’: Daubechies wavelet hash
‘colorhash’: HSV color hash
‘crop-resistant-hash’: Crop-resistant hash</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>hashfunc</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.img_flatten">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">img_flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.img_flatten" title="Link to this definition"></a></dt>
<dd><p>Flatten image.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.import_example">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">import_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'flowers'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">','</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'info'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.import_example" title="Link to this definition"></a></dt>
<dd><p>Import example dataset from github source.</p>
<p>Import the few datasets from github source or specify your own download url link.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>str</em>) – <dl class="simple">
<dt>Images:</dt><dd><ul>
<li><p>’faces’</p></li>
<li><p>’mnist’</p></li>
</ul>
</dd>
<dt>Files with images:</dt><dd><ul>
<li><p>’southern_nebula’</p></li>
<li><p>’flowers’</p></li>
<li><p>’scenes’</p></li>
<li><p>’cat_and_dog’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>url</strong> (<em>str</em>) – url link to to dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of str containing filepath to images.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list or numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.imresize">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">imresize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(128,</span> <span class="pre">128)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.imresize" title="Link to this definition"></a></dt>
<dd><p>Resize image.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.imscale">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">imscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.imscale" title="Link to this definition"></a></dt>
<dd><p>Normalize image by scaling.</p>
<p>Scaling in range [0-255] by img*(255/max(img))</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>img</strong> (<em>array-like</em>) – Input image data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>img</strong> – Scaled image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.listdir">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">listdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['png',</span> <span class="pre">'tiff',</span> <span class="pre">'tif',</span> <span class="pre">'jpg',</span> <span class="pre">'jpeg',</span> <span class="pre">'heic']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.listdir" title="Link to this definition"></a></dt>
<dd><p>Collect recursive images from path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirpath</strong> (<em>str</em>) – Path to directory; “/tmp” or “c://temp/”</p></li>
<li><p><strong>ext</strong> (<em>list</em><em>, </em><em>default:</em><em> [</em><em>'png'</em><em>, </em><em>'tiff'</em><em>, </em><em>'tif'</em><em>, </em><em>'jpg'</em><em>, </em><em>'jpeg'</em><em>, </em><em>'heic'</em><em>]</em>) – extentions to collect form directories.</p></li>
<li><p><strong>black_list</strong> (<em>list</em><em>, </em><em>(</em><em>default:</em><em> [</em><em>'undouble'</em><em>]</em><em>)</em>) – Exclude directory with all subdirectories from processing.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em><em>, </em><em>(</em><em>default: True</em><em>)</em>) – Walk recursively trhough all subdirectories</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>getfiles</strong> – Full pathnames to images.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clustimage</span> <span class="k">as</span> <span class="nn">cl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathnames</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;c://temp//flower_images&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.move_files">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">move_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetdir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.move_files" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.seperate_path">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">seperate_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.seperate_path" title="Link to this definition"></a></dt>
<dd><p>Seperate path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pathnames</strong> (<em>list</em><em> of </em><em>str</em>) – pathnames to the images.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>dirname</strong> (<em>str</em>) – directory path.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – filename.</p></li>
<li><p><em>ext</em> – Extension.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.set_logger">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">set_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose:</span> <span class="pre">[&lt;class</span> <span class="pre">'str'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'int'&gt;]</span> <span class="pre">=</span> <span class="pre">'info'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.set_logger" title="Link to this definition"></a></dt>
<dd><p>Set the logger for verbosity messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbose</strong> (<em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>, </em><em>default is 'info'</em><em> or </em><em>20</em>) – Set the verbose messages using string or integer values.
* [0, 60, None, ‘silent’, ‘off’, ‘no’]: No message.
* [10, ‘debug’]: Messages from debug level and higher.
* [20, ‘info’]: Messages from info level and higher.
* [30, ‘warning’]: Messages from warning level and higher.
* [50, ‘critical’]: Messages from critical level and higher.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>None.</em></p></li>
<li><p><em>&gt; # Set the logger to warning</em></p></li>
<li><p><em>&gt; set_logger(verbose=’warning’)</em></p></li>
<li><p><em>&gt; # Test with different messages</em></p></li>
<li><p><em>&gt; logger.debug(“Hello debug”)</em></p></li>
<li><p><em>&gt; logger.info(“Hello info”)</em></p></li>
<li><p><em>&gt; logger.warning(“Hello warning”)</em></p></li>
<li><p><em>&gt; logger.critical(“Hello critical”)</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.store_to_disk">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">store_to_disk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xraw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tempdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.store_to_disk" title="Link to this definition"></a></dt>
<dd><p>Store to disk.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.unique_no_sort">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">unique_no_sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.unique_no_sort" title="Link to this definition"></a></dt>
<dd><p>Uniques without sort.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clustimage.clustimage.url2disk">
<span class="sig-prename descclassname"><span class="pre">clustimage.clustimage.</span></span><span class="sig-name descname"><span class="pre">url2disk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clustimage.clustimage.url2disk" title="Link to this definition"></a></dt>
<dd><p>Write url locations to disk.</p>
<p>Images can also be imported from url locations.
Each image is first downloaded and stored on a (specified) temp directory.
In this example we will download 5 images from url locations. Note that url images and path locations can be combined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urls</strong> (<em>list</em>) – list of url locations with image path.</p></li>
<li><p><strong>save_dir</strong> (<em>str</em>) – location to disk.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>urls</strong> – list to url locations that are now stored on disk.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Init with default settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clustimage</span> <span class="k">as</span> <span class="nn">cl</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Importing the files files from disk, cleaning and pre-processing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_to_images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://erdogant.github.io/datasets/images/flower_images/flower_orange.png&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="s1">&#39;https://erdogant.github.io/datasets/images/flower_images/flower_white_1.png&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="s1">&#39;https://erdogant.github.io/datasets/images/flower_images/flower_white_2.png&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="s1">&#39;https://erdogant.github.io/datasets/images/flower_images/flower_yellow_1.png&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="s1">&#39;https://erdogant.github.io/datasets/images/flower_images/flower_yellow_2.png&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import into model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">url2disk</span><span class="p">(</span><span class="n">url_to_images</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;c:/temp/out/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

<hr>
<center>
        <script async src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
        <!-- Show an image ad -->
        <!-- <div data-ea-publisher="erdogantgithubio" data-ea-type="image"></div> -->
        <div data-ea-publisher="erdogantgithubio" data-ea-type="image" data-ea-style="stickybox"></div>
</center>
<hr></section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Coding%20quality.html" class="btn btn-neutral float-left" title="Coding quality" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Erdogan Taskesen.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>